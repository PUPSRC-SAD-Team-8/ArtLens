<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artlens</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Quiz Form</h2>
        <form>
            <div id="question-container">
                <div class="question" id="question1">
                    <div class="mb-3">
                        <label for="question1" class="form-label">Question 1:</label>
                        <input type="text" class="form-control" name="question[]" placeholder="Enter your question" required>
                    </div>
                    <div class="mb-3">
                        <label for="image1" class="form-label">Upload Image:</label>
                        <input type="file" class="form-control" name="image[]" id="image1">
                    </div>
                    <div class="mb-3">
                        <label for="answer-type1" class="form-label">Answer Type:</label>
                        <select class="form-select answer-type" name="answer-type[]">
                            <option value="multiple-choice">Multiple Choice</option>
                            <option value="checkbox">Checkbox</option>
                            <option value="paragraph">Paragraph</option>
                        </select>
                    </div>
                    <div class="mb-3 answer-options">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer1[]" value="option1" required>
                            <input type="text" class="form-control option-text" placeholder="Enter option text">
                        </div>
                        <button type="button" class="btn btn-primary add-option">Add Option</button>
                    </div>
                    <button type="button" class="btn btn-danger delete-question">Delete Question</button>
                </div>
            </div>
            <div class="mb-3">
                <button type="button" class="btn btn-primary add-question">Add Question</button>
            </div>
            <button type="submit" class="btn btn-success">Submit Quiz</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Add question button click event
        document.querySelector('.add-question').addEventListener('click', function() {
            const questionContainer = document.querySelector('#question-container');
            const questionCount = questionContainer.querySelectorAll('.question').length + 1;
            const newQuestion = `
                <div class="question" id="question${questionCount}">
                    <div class="mb-3">
                        <label for="question${questionCount}" class="form-label">Question ${questionCount}:</label>
                        <input type="text" class="form-control" name="question[]" placeholder="Enter your question" required>
                    </div>
                    <div class="mb-3">
                        <label for="image${questionCount}" class="form-label">Upload Image:</label>
                        <input type="file" class="form-control" name="image[]" id="image${questionCount}">
                    </div>
                    <div class="mb-3">
                        <label for="answer-type${questionCount}" class="form-label">Answer Type:</label>
                        <select class="form-select answer-type" name="answer-type[]">
                            <option value="multiple-choice">Multiple Choice</option>
                            <option value="checkbox">Checkbox</option>
                            <option value="paragraph">Paragraph</option>
                        </select>
                    </div>
                    <div class="mb-3 answer-options">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer${questionCount}[]" value="option1" required>
                            <input type="text" class="form-control option-text" placeholder="Enter option text">
                        </div>
                        <button type="button" class="btn btn-primary add-option">Add Option</button>
                    </div>
                    <button type="button" class="btn btn-danger delete-question">Delete Question</button>
                </div>
            `;
            questionContainer.insertAdjacentHTML('beforeend', newQuestion);
        });

        // Delete question button click event
        document.addEventListener('click', function(event) {
            if (event.target && event.target.classList.contains('delete-question')) {
                const question = event.target.closest('.question');
                question.remove();
                updateQuestionNumbers();
            }
        });

        // Update question numbers
        function updateQuestionNumbers() {
            const questions = document.querySelectorAll('.question');
            questions.forEach((question, index) => {
                const questionNumber = index + 1;
                question.id = `question${questionNumber}`;
                question.querySelector('label[for^="question"]').textContent = `Question ${questionNumber}:`;
                question.querySelectorAll('input[type="file"]').forEach(input => {
                    input.id = `image${questionNumber}`;
                });
                question.querySelectorAll('select[name^="answer-type"]').forEach(select => {
                    select.name = `answer-type[]`;
                    select.id = `answer-type${questionNumber}`;
                });
                question.querySelectorAll('.answer-options').forEach(options => {
                    options.querySelectorAll('input[name^="answer"]').forEach(input => {
                        const inputName = input.name.replace(/\d+/, questionNumber);
                        input.name = inputName;
                    });
                });
            });
        }

document.addEventListener('click', function(event) {
    if (event.target && event.target.classList.contains('add-option')) {
        const optionsContainer = event.target.closest('.answer-options');
        const questionNumber = optionsContainer.parentElement.id.substr(8);
        const optionCount = optionsContainer.querySelectorAll('.form-check').length;
        const selectedType = optionsContainer.parentElement.querySelector('.answer-type').value;
        let newOption = '';

        if (selectedType === 'multiple-choice' || selectedType === 'checkbox') {
            newOption = `
                <div class="form-check">
                    <input class="form-check-input" type="${selectedType === 'multiple-choice' ? 'radio' : 'checkbox'}" name="answer${questionNumber}[]" value="option${optionCount + 1}" required>
                    <input type="text" class="form-control option-text" placeholder="Enter option text">
                </div>
            `;
        } else if (selectedType === 'paragraph') {
            newOption = `
                <textarea class="form-control" name="answer${questionNumber}[]" placeholder="Enter answer" required></textarea>
            `;
        }

        optionsContainer.insertAdjacentHTML('beforeend', newOption);
    }
});



// Answer type change event
document.querySelectorAll('.answer-type').forEach(select => {
    select.addEventListener('change', function(event) {
        const selectedType = event.target.value;
        const answerOptions = event.target.closest('.question').querySelector('.answer-options');

        // Clear existing answer options
        answerOptions.innerHTML = '';

        if (selectedType === 'multiple-choice' || selectedType === 'checkbox') {
            // Create radio buttons or checkboxes based on selected type
            const optionCount = selectedType === 'multiple-choice' ? 1 : 3;
            for (let i = 1; i <= optionCount; i++) {
                const option = `
                    <div class="form-check">
                        <input class="form-check-input" type="${selectedType === 'multiple-choice' ? 'radio' : 'checkbox'}" name="answer${event.target.id.substr(10)}[]" value="option${i}" required>
                        <input type="text" class="form-control option-text" placeholder="Enter option text">
                    </div>
                `;
                answerOptions.insertAdjacentHTML('beforeend', option);
            }
            const addOptionBtn = `
                <button type="button" class="btn btn-primary add-option">Add Option</button>
            `;
            answerOptions.insertAdjacentHTML('beforeend', addOptionBtn);
        } else if (selectedType === 'paragraph') {
            // Create text area for paragraph type
            const option = `
                <textarea class="form-control" name="answer${event.target.id.substr(10)}[]" placeholder="Enter answer" required></textarea>
            `;
            answerOptions.insertAdjacentHTML('beforeend', option);
        }
    });
});

    </script>
</body>
</html>
